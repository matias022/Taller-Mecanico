<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <link rel="stylesheet" href="css/estilos.css">
  <link href="https://fonts.googleapis.com/css2?family=Original+Surfer&display=swap" rel="stylesheet">
  <script src="js/sweetalert2.all.min.js"></script>
    <script src="js/jquery-3.6.0.min.js"></script>

  <title>TM Rayo McQueen</title>
</head>

<body class="fondo" >
<!--Barra de navegacion-->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid" id="barra">
      <a class="navbar-brand" href="index.html"><img src="img/logo oficial.png" alt=""></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="index.html">Inicio</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="trabajos.html">Trabajos</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="iniciarsesion.html">Inicia sesion</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="registrar.html">Registrar</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="formulario.html">Formulario </a>
              </li>

          </ul>
          <form class="d-flex">
              <input class="form-control me-2" type="search" placeholder="Palabra clave"
                  aria-label="Palabra clave">
              <button class="btn btn-outline-success" type="button">Buscar</button>
          </form>
      </div>
  </div>
</nav>

  <!--Bienvenida-->
  <header class="container-fluid">
    <div class="inicio">
      <h1>Bienvenidos al Taller Mecanico Rayo McQueen</h1>
    </div>
  </header>
  <!--Presentacion-->
  <div class="container-fluid">
    <div class="presentacion">
      <p>Rellene el formulario de contacto</p>
    </div>

    <section id="formulario">
      <!-- codigo de inicio de formulario -->
      <form class="form-registro" action="" method="post" onsubmit="return validacionForm()">

          <h2 class="form-titulo">Creacion de Cuenta Usuario</h2>

          <div class="contenedor-input">
              <input class="col-sm" type="text" name="txtRut" id="txtRut" placeholder="ingrese rut" required minlength="9" maxlength="10" >
              <input class="col-sm" type="text" name="txtNombreCompleto" id="txtNombreCompleto" placeholder="ingrese nombre y apellido" required minlength="5" pattern="[A-Za-z ]{5,15}" title="nombres de entre 5 a 15 caracteres">
              <input class="col-sm" type="date" name="txtFechaNaci" id="txtFechaNaci" required>
              <input class="col-sm" type="email" name="txtEmail" id="" placeholder="ingrese email" required minlength="8">
              <input class="col-sm" type="text" name="txtUsuario" id="" placeholder="ingrese usuario" required minlength="8">
              <input class="col-sm" type="password" name="txtPass" id="" placeholder="ingrese password" required minlength="8" maxlength="15">
              <input class="col-gr" type="number" name="txtFono" id="" placeholder="ingrese fono" minlength="7">

              <input class="btn-registro" type="submit" value="Registrar">
              <input class="btn-registro" type="button" value="Validar Formulario"
               onclick="validacionForm()">
               <input type="button" value="Grabar" onclick="grabar()">
               <input type="button" value="Listar" onclick="listar()">
          </div>
      </form>

  </section>
  <script src="js/usuario.js"></script>
  <script src="js/scripts.js"></script>
  <script>
      var arreglo = new Array();
      var index = 0;

      function grabar() {
          var rut = document.getElementById('txtRut').value;
          var nombre = document.getElementById('txtNombreCompleto').value;
          var fecha = document.getElementById('txtFechaNaci').value;
          usu = new usuario();
          usu.setRut(rut);
          usu.setNombre(nombre);
          usu.setFecha(fecha);
          alert('datos:' + usu.imprimir());
          arreglo[index] = JSON.stringify(usu);
          localStorage.setItem('registro',arreglo);
          alert('grabo');
          index++;
      }
      function listar() {
          var tabla="<table border=1>";
          tabla=tabla+"<tr> <td>Rut</td> <td>Nombre</td> <td>Fecha</td> </tr>";
          var arreglo_temp = new Array();
          var datos = localStorage.getItem('registro');
          datos=datos.split("},{").join("};{"); // reemplazar , por ;
          arreglo_temp = datos.split(";");
          for (let index = 0; index < arreglo_temp.length; index++) {
              var element = arreglo_temp[index];
              var usu = JSON.parse(element);
              tabla=tabla+"<tr> <td>"+usu.rut+"</td> <td>"+usu.nombre+"</td> <td>"+usu.fecha+"</td> </tr>";
          }
          tabla=tabla+"</table>";
          document.getElementById('listado').innerHTML = tabla;
      }
  </script>
  <div id="listado">

  </div>
  <script>
      $(document).ready(function() {
          alert('Jquery esta listo');
      });
  </script>

</main>
<!-- footer -->
<footer>
  <div class="contenedor">
      <h4>Mis Perris - Desarrollo Web</h4>
  </div>
</footer>
<script src="dist_lb/js/lightbox-plus-jquery.js"></script>
</body>

</html>